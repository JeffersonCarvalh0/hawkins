{% extends "form_base.html" %}
{% load i18n %}
{% load crud_extras %}

{% block top %}
<br>
    <div class="row">
        <div class="col s6">
            <h4> {% trans "Add students to class" %} </h4>
            <h5> {% trans "Select the students you want to add." %} </h5>
        </div>

        <div class="input-field col s6">
            <i class="material-icons prefix"> search </i>
            <input type="text" id="search_field" class="validate">
            <label for="search_field"> {% trans "Search" %} </label>
        </div>
    </div>
{% endblock %}

{% block fields_loop %}
    <ul>
        {% for key, form in forms.items %}
            <li>
                <p>
                    <div class="row">
                        <div class="col s4">
                            <input {% if key in defaults %} checked {% endif %} type="checkbox" id="{{ key }}">
                            <label for="{{ key }}"> {{ form.label }} </label>
                        </div>
                        <div class="col s8">
                            <div class="input-field inline">
                                {{ form.number }}
                                {{ form.label_tag }}
                            </div>
                        </div>
                    </div>
                    {# <input {% if form in defaults %} checked {% endif %} type="checkbox" id="id_{{ field.name }}_{{ forloop.counter0 }}"/>#}
                    {# <label for="id_{{ field.name }}_{{ forloop.counter0 }}"> {{ choice }} </label>#}
                </p>
            </li>
        {% endfor %}
    </ul>

{% endblock %}

{% block script %}
    <script type="text/javascript">
        var $rows = $('ul li p');
        $('#search_field').keyup(function() {

            var val = '^(?=.*\\b' + $.trim($(this).val()).split(/\s+/).join('\\b)(?=.*\\b') + ').*$',
            reg = RegExp(val, 'i'),
            text;

            $rows.show().filter(function() {
                text = $(this).text().replace(/\s+/g, ' ');
                return !reg.test(text);
            }).hide();
        });
    </script>
{% endblock %}
